# JavaScript  
CSS와 유사하게 선택자를 통해 요소를 제어함.  

JS 소스가 짧을 경우, 웹 문서 내에 `<script>` 태그 안에 적기도 함.  
JS는 웹 문서 내 요소를 제어하는 경우가 많아서, 요소들이 렌더링된 뒤에 실행하는 것이 좋음.  
그래서 body 태그 아래에 작성함.  

HTML,CSS와 달리 대소문자를 구분함.  

요소를 변수에 저장하고, 함수를 정의해서 요소를 제어함.  

var를 쓰지 않는 이유? 재선언이 가능함.  
이로 인해 변수가 유실될 수 있음.  

let은 재선언 불가능, 값 변경 가능.(변수)  
const는 재선언, 값 변경 불가능.(상수)  
JS는 같은 변수로 다른 값을 넣는 일이 거의 없어서, const를 쓰는걸 권장.  

JS는 자료형은 존재하지만, 따로 선언하지는 않음.  

### 웹 브라우저 스크립트 해석 과정 (p.448)  
1. HTML 분석기 (구조 이해) html 표준에 맞춰 읽음 `<!DOCTYPE html>` 
2. CSS 분석기 -> `<style>`  
3. JS 해석기 -> `<script>`  
4. HTML,CSS 렌더링  
5. JS 분석기 -> 기능 부여 및 실행  

### 외부 스크립트 파일 연결  
```
<script src="와부 스크립트 파일 경로"></script>
또는
<script src="와부 스크립트 파일 경로"/>
```

## 기본 용어

JS의 큰 줄기는 식<sup>expression</sup>과 문.<sup>statement</sup>  
`식` : 값을 만들어내는 것 (연산식, 문자열, 숫자)  
`문` : 명령 (반복문, 조건문)  

## 입출력  
### alert()  
> 알림창.  
작은 알림창을 통해 출력하는 함수.  
확인 버튼만 있음.  

### confirm()  
> 확인창.  
alert()와 같지만, 확인과 취소 버튼이 있음.  
각각 true와 false 값을 반환함.  

### prompt()  
> 입력창  
텍스트와, 입력할 수 있는 텍스트 칸을 같이 출력됨.  
```javascript
prompt("메세지","기본값");
텍스트 입력칸에 기본값을 넣을 수 있음
```


### document.write()  
> html 문서에 매개변수를 입력함.  

### console.log()  
> 콘솔창에 매개변수를 출력함.  
보통 디버깅할 때 사용.  

## 자바스크립트 스타일 가이드  
구글 : https://google.github.io/styleguide/jsguide.html  
에어비앤비(리액트) : https://github.com/airbnb/javascript#strings--line-length  

## 자료형  
<table border=1>
<tr>
    <th colspan=2>종류</th>
    <th>설명</th>
    <th>예시</th>
</tr>
<tr>
    <td rowspan=3>기본유형</td>
    <td>숫자형</td>
    <td>따옴표 없이 숫자로만 표기</td>
    <td>let birthYear = 2000;</td>
</tr>
<tr>
    <td>문자열</td>
    <td>작은따옴표/큰따옴표로 묶어서 나타냄.</td>
    <td>let greeting = "Hello"; <br>let birthYear = "2000";</td>
</tr>
<tr>
    <td>논리형</td>
    <td>true,false 소문자로 표시함</td>
    <td>let isEmpty = true;</td>
</tr>
<tr>
    <td rowspan=2>복합유형</td>
    <td>배열</td>
    <td>하나의 변수에 여러 개의 값을 저장</td>
    <td>let seasons = ['봄', '여름', '가을', '겨울'];</td>
</tr>
<tr>
    <td>객체</td>
    <td>함수와 속성을 함께 포함함</td>
    <td>let date = new Date();</td>
</tr>
<tr>
    <td>undefined</td>
    <td colspan=3>자료형이 지정되지 않은 상태. 변수만 선언하고 값을 할당하지 않은 상태임.</td>
</tr>
<tr>
    <td>null</td>
    <td colspan=3>값이 유효하지 않은 상태</td>
</tr>
</table>

- JS에서 null은, 자바와 다르게 값이 유효하지 않은 상태임.  
- 정밀한 실수를 계산하기에는, 예상하지 못한 결과값이 나오기에 적합하지 않음.  
    정수를 입력받아도, 문자열로 취급하는데, 내부에서 무작위로 정수, 실수로 변환되면서 정확한 값이 안 나옴.  
    보통 `parseInt()`<sup> : 정수형으로 변환하는 함수</sup>  를 사용함.  
- 문자열 안에 문자열을 넣으려면, 큰 따옴표 안에 작은 따옴표로 구분해서 적으면 됨.  
- 배열 안에 타입이 다른 변수들을 넣을 수 있음.  

## 연산자  

### typeof 연산자  
변수의 자료형을 출력함.  
```javascript
typeof 100
> "number"
```

값 앞에 +를 붙이면, 정수값으로 인식함.  

---

`==`, `!=` (동등 연산자) : 값을 비교  
3 == "3" -> true  
`===`, `!==` (일치 연산자) : 값과 타입을 같이 비교  
3 === "3" -> false  

비트 논리 연산자는 사용 불가  

## 함수 (function)  
`function` : 함수 선언 키워드  
> 브라우저가 JS 소스를 해석할 때, 함수 선언부분을 가장 먼저 해석함.  
그래서 함수의 선언 위치는 어디든 상관 없음.  
```javascript
// 함수 선언
function addNumber(a,b)
{
    return a+b;
}

//함수 호출
addNumber(3,5);
```
#### 함수 선언문 매개변수에 기본값을 지정할 수 있음.  
```javascript
function addNumber(a,b,c=10) //c 기본값 지정
{
    return (a+b)*c;
}
// 기본값을 지정하고, 새로 입력받는 것도 가능.
```


### 익명 함수  

익명 함수를 선언해서, 변수에 할당 가능.  
다른 함수의 매개변수로 사용할 수도 있음.  

```javascript
// const는 호이스팅되지 않기 때문에, 호출구문 위에 작성해야 함.
const displayNumber = () => {
    console.log("123");
    }

//호출
displayNumber();
```

### 즉시 실행 함수  
함수를 정의하면서 동시에 실행할 수 있음.  
함수를 소괄호로 감싸고, 중괄호 뒤에 소괄호와 세미콜론<sup>명령 끝</sup>을 붙임.  
```javascript
(function() {
    console.log("123");
    }());

// 매개변수가 있는 즉시실행함수
const number = +prompt("인수");
(function(n) {  
    console.log("123");
    }(인수);    // 함수가 사용할 인수 : 함수 밖에서 할당한 변수, 또는 값을 직접 넣음. 

```

### 화살표 함수  
함수 선언을 좀 더 간단히 표현하는 방법.  
람다식과 비슷함.  

```javascript
(매개변수) => { 함수내용 }
// 매개변수가 없는 함수
// const hi = function() { return "안녕하세요?"; }
const hi = () => "안녕하세요?";
// 매개변수가 1개인 함수
// let hi = function(user) { document.write(user+ "님, 안녕하세요?"); }
let hi = user => document.write(user + "님, 안녕하세요?"); 
// 매개변수가 2개인 함수  
// let sum = function(a,b) { return a+b; }
let sum = (a,b) => a+b;
```


## 변수  

#### 변수 적용 범위 (스코프)  
`지역변수` or `로컬변수` : 함수 내에서만 사용하는 변수  
`전역변수` or `글로벌변수` : 스크립트 소스 전체에서 사용할 수 있는 변수  
예약어 없이 선언한 변수는 전역변수가 됨.  

#### 호이스팅(hoisting)  
상황에 따라 변수의 선언과 할당을 분리해서, 선언 부분을 스코프의 가장 위쪽으로 끌어올려 인식하는 것을 말함.  
변수를 선언하기 전, 해당 변수를 사용하는 코드가 있고, 그 아래에 해당 변수를 선언하는 코드가 있어도  
호이스팅으로 인해 제대로 실행 됨.  
```
var x = 10;
function displayNumber() {
    console.log(x);
    console.log(y);
    var y = 20;
}
displayNumber();
```

### var 변수  
지역 변수, 호이스팅/중복선언/재할당 가능.  
호이스팅, 중복선언 등 여러가지 이유로 예상치 못할 오류가 발생할 일이 많아서  
아예 사용하지 않음.  

### let 변수  
호이스팅/재선언 불가능, 재할당 가능  
블록 영역의 스코프를 가짐  

### const 변수  
호이스팅/재선언/재할당 불가능  
블록 영역의 스코프를 가짐  

---

## 이벤트와 이벤트 처리기  
"웹 문서 내에서" 버튼을 클릭하거나 항목을 선택하는 것이 `이벤트`.  
이벤트 발생 시에 실행하는 함수를 `이벤트 처리기`라고 함.  

이벤트 처리기는 사용자나, 개발자가 실행하는 것이 아니라,  
사용자가 이벤트를 발생시키면, 이와 연결된 이벤트 처리기를 "웹이 실행함".  

이벤트에는 마우스, 키보드, 문서 로딩, 폼 이벤트들이 있음.  

### 마우스 이벤트  

<table border="1">
    <thead>
        <tr>
            <th>헤드</th>
            <th>설명</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>click</td>
            <td>요소 클릭 시 이벤트 발생</td>
        </tr>
        <tr>
            <td>dblclick</td>
            <td>요소 더블클릭 시 이벤트 발생</td>
        </tr>
        <tr>
            <td>mousedown</td>
            <td>요소 위에서 마우스 버튼을 눌렀을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>mousemove</td>
            <td>요소 위에서 마우스 포인터를 움직일 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>mouseover</td>
            <td>포인터가 요소 위로 옮겨질 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>mouseout</td>
            <td>포인터가 요소에서 벗어날 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>mouseup</td>
            <td>요소 위에 놓인 마우스 버튼에서 손을 뗄 때 이벤트 발생</td>
        </tr>
    </tbody>
</table>


### 키보드 이벤트  
<table border="1">
    <thead>
        <tr>
            <th>헤드</th>
            <th>설명</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>keydown</td>
            <td>키를 누르는 동안 이벤트 발생</td>
        </tr>
        <tr>
            <td>keypress</td>
            <td>키를 눌렀을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>keyup</td>
            <td>키에서 손을 뗄 때 이벤트 발생</td>
        </tr>
    </tbody>
</table>


### 문서 로딩 이벤트  

<table border="1">
    <thead>
        <tr>
            <th>헤드</th>
            <th>설명</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>abort</td>
            <td>문서가 완전히 로딩되기 전, 불러오기를 멈췄을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>error</td>
            <td>문서가 정확히 로딩되지 않았을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>load</td>
            <td>문서 로딩이 끝나면 이벤트 발생</td>
        </tr>
        <tr>
            <td>resize</td>
            <td>문서 화면 크기가 바뀌었을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>scroll</td>
            <td>문서 화면이 스크롤 되었을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>unload</td>
            <td>문서에서 벗어날 때 이벤트 발생</td>
        </tr>
    </tbody>
</table>

### 폼 이벤트  

<table border="1">
    <thead>
        <tr>
            <th>헤드</th>
            <th>설명</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>blur</td>
            <td>폼 요소에 포커스를 잃었을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>change</td>
            <td>목록이나 체크 상태 등이 변결되면 이벤트 발생 (input, select, textarea 태그에서 사용)</td>
        </tr>
        <tr>
            <td>focus</td>
            <td>폼 요소에 포커스가 놓였을 때 이벤트 발생 (label, select, textarea, button 태그에서 사용)</td>
        </tr>
        <tr>
            <td>reset</td>
            <td>폼이 리셋되었을 때 이벤트 발생</td>
        </tr>
        <tr>
            <td>submit</td>
            <td>submit 버튼을 클릭했을 때 이벤트 발생</td>
        </tr>
    </tbody>
</table>

---

### 이벤트 처리기 or 이벤트 핸들러  
이벤트가 발생하면 처리하는 함수.  
```javascript
<태그 on이벤트명 = "함수명">
<p onclick="alert('버튼을 클릭함')">ㅁㄴㅇㄹ</p>
<p onmouseover="userfunc()">ㄲㄲㄲㄲ</p>
```

클릭하면 div 배경색을 바꾸는 예시  
```javascript
<body>
	<ul>
		<li><a href="#" onclick="changeBg('green')">Green</a></li>
		<li><a href="#" onclick="changeBg('orange')">Orange</a></li>
		<li><a href="#" onclick="changeBg('purple')">Purple</a></li>
	</ul>		
	<div id="result"></div>
	
	<script>
		function changeBg(color) {
			var result = document.querySelector('#result');
			result.style.backgroundColor = color;
		}
	</script>
</body>
```

## DOM (Document Object Model)  
태그 요소 하나 하나를 문서 객체라고 함.  
HTML의 요소를 가져와서 이벤트 처리기에 연결하는, JS를 중심으로 사용하는 방식임.  
HTML와 jsp 파일을 분리함.  

```javascript
// 함수 뒤에 소괄호를 붙이지 않음!!
웹요소.onclick = 함수;
document.querySelector('#desc').onclick = hideDetail;

// 딱 한번만 사용한다면 익명 함수를 만들어 사용
웹요소.onclick = function () {
    // 수행 내용;
};

// 화살표 함수
웹요소.onclick = () => {
    // 수행 내용;
};
```
