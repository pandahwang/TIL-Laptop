<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연습문제3</title>
</head>
<style>
input, button {
    margin: 10px;
}
</style>
<body>
    <form action="">
        <fieldset>
            <legend>회원가입</legend>
            <label for="user_id">아이디 : </label><input type="text" id="user_id"><br>
            <label for="user_pw">비밀번호 : </label> <input type="password" id="user_pw"><br>
            <label for="user_pw2">비밀번호 확인 : </label><input type="password" id="user_pw2"><br>
            <label for="user_name">이름 : </label><input type="text" id="user_name"><br>
            <button>회원가입</button>
        </fieldset>
    </form>
    <script>
        const user_id = document.querySelector("#user_id");
        const user_pw = document.querySelector("#user_pw");
        const user_pw2 = document.querySelector("#user_pw2");
        const user_name = document.querySelector("#user_name");
        const forms = [user_id, user_pw, user_pw2, user_name];
        let ids=["user01"];

        document.querySelector("button").addEventListener("click", (e)=>{
            e.preventDefault();
            let isCheckForms;
            let isCheckId;
            checkforms();
            checkId();
            if(isCheckForms==true && isCheckId==true){
                ids.push(user_id);
                alert(user_id.value+"님, 회원가입이 성공적으로 완료되었습니다.");
                forms.forEach(function(form){
                    form.value="";
                })
            }
        });

        function checkforms() {
            for(let i=0;i<forms.length;i++){
                if(forms[i].value==""){
                    alert(+"(을)를 입력해주세요.");
                    focus(forms[i]);
                    isCheckForms = false;
                    break;
                }
                else isCheckForms = true;
            }
        }

        function checkId(){
            if(ids.includes(user_id.value)){
                alert("사용할 수 없는 아이디입니다.");
                user_id.value = "";
                focus(user_id);
                isCheckId = false;
            }
            else isCheckId = true;
        }
    </script>
</body>
</html>